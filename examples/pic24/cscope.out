cscope 15 $HOME/projects/math/s16math/examples/pic24 -q 0000000419 0000017756
	@../../lib/s16math.h

56 #i‚de‡
S16MATH_H


57 
	#S16MATH_H


	)

58 
	~<°döt.h
>

60 #ifde‡
__˝lu•lus


66 #i‡!
deföed
(
SDCC
Ë&& !deföed(
__C51__
Ë&& !deföed(
__CX51__
)

67 #¥agm®
∑ck
(
push
,1)

71 
öt8_t
 
	ts8
;

72 
uöt8_t
 
	tu8
;

73 
öt16_t
 
	ts16
;

74 
uöt16_t
 
	tu16
;

75 
öt32_t
 
	ts32
;

76 
uöt32_t
 
	tu32
;

78 #ifde‡
USE_BINARY_POINT


80 
	#DSHIFT
 4

	)

81 
	#DSCALE
 (1<<
DSHIFT
Ë

	)

82 
	#DMASK
 (
DSCALE
-1Ë

	)

83 
	#DWIDTH
 2

	)

85 
	#NSHIFT
 7

	)

86 
	#NSCALE
 (1<<
NSHIFT
Ë

	)

87 
	#NMASK
 ((
NSCALE
)-1Ë

	)

88 
	#NWIDTH
 3

	)

89 
	#MMASK
 (~
NMASK
Ë

	)

91 
	#RSHIFT
 10

	)

92 
	#RSCALE
 (1<<
RSHIFT
Ë

	)

93 
	#RMASK
 (
RSCALE
-1Ë

	)

94 
	#RWIDTH
 4

	)

95 
	#RF
 
RSHIFT


	)

96 
	#UF
 
NSHIFT


	)

97 
	#SCALE_INTEGRAL
 (
DSHIFT
Ë

	)

98 
	#SCALE_RAD
 (
NSHIFT
-
DSHIFT
Ë

	)

99 
	#MIN_ATAN_FRACT
 584

	)

101 
	#fvÆue
(
x
Ë(((x)&
NMASK
)<<
UF
Ë

	)

102 
	#ivÆue
(
x
Ë((x)&
MMASK
Ë

	)

103 
	#‰ac_∑π
(
x
Ë((x)&
NMASK
Ë

	)

104 
	#öt_∑π
(
x
Ë((x)>>
UF
Ë

	)

105 
	#is_odd
(
x
Ë(((x)&(
UI
|
NMASK
))!=0)

	)

106 
	#¥esˇÀ
(
x
Ë((
s32
)
	`abs
(x)<<
UF
Ë

	)

107 
	#¥îsˇÀ
(
x
Ë((
s32
)
	`abs
(x)<<
RF
Ë

	)

108 
	#fixsˇÀ
(
x
Ë((x)>>
UF
Ë

	)

109 
	#fixrsˇÀ
(
x
Ë((x)>>
RF
Ë

	)

110 
	#sˇÀdown
(
n
,
s
Ë(“)>>(s))

	)

111 
	#sˇÀup
(
n
,
s
Ë(“)<<(s))

	)

112 
	#dround
(
x
Ë(
	`i¢eg
(x)?-((
	`abs
(x)-
KD
)):(x)+KD)

	)

113 
	#ƒound
(
x
Ë(
	`i¢eg
(x)?-((
	`abs
(x)-
KN
)):(x)+KN)

	)

114 
	#ºound
(
x
Ë(
	`i¢eg
(x)?-((
	`abs
(x)-
KR
)):(x)+KR)

	)

118 
	#DSCALE
 10

	)

119 
	#DWIDTH
 1

	)

120 
	#NSCALE
 100

	)

121 
	#NWIDTH
 2

	)

122 
	#RSCALE
 1000

	)

123 
	#RWIDTH
 3

	)

124 
	#RF
 
RSCALE


	)

125 
	#UF
 
NSCALE


	)

126 
	#SCALE_INTEGRAL
 (
RSCALE
/
NSCALE
Ë

	)

127 
	#SCALE_RAD
 (
RSCALE
/
NSCALE
Ë

	)

128 
	#MIN_ATAN_FRACT
 570

	)

130 
	#fvÆue
(
x
Ë(((x)%
UF
)*UFË

	)

131 
	#ivÆue
(
x
Ë(((x)/
UF
)*UFË

	)

132 
	#‰ac_∑π
(
x
Ë((x)%
UF
Ë

	)

133 
	#öt_∑π
(
x
Ë((x)/
UF
Ë

	)

134 
	#is_odd
(
x
Ë(((x)%(2*
UI
))!=0)

	)

135 
	#¥esˇÀ
(
x
Ë((
s32
)
	`abs
(x)*
UF
)

	)

136 
	#¥îsˇÀ
(
x
Ë((
s32
)
	`abs
(x)*
RF
)

	)

137 
	#fixsˇÀ
(
x
Ë((x)/
UF
)

	)

138 
	#fixrsˇÀ
(
x
Ë((x)/
RF
)

	)

139 
	#sˇÀdown
(
n
,
s
Ë(“)/(s))

	)

140 
	#sˇÀup
(
n
,
s
Ë(“)*(s))

	)

141 
	#dround
(
x
Ë((x)+(
	`i¢eg
(x)?-
KD
:KD))

	)

142 
	#ƒound
(
x
Ë((x)+(
	`i¢eg
(x)?-
KN
:KN))

	)

143 
	#ºound
(
x
Ë((x)+(
	`i¢eg
(x)?-
KR
:KR))

	)

146 
	#S16_NAN
 (-99*
QN
)

	)

147 
	#QD
 
DSCALE


	)

148 
	#QN
 
NSCALE


	)

149 
	#QR
 
RSCALE


	)

150 
	#KD
 (
QD
>>1)

	)

151 
	#KN
 (
QN
>>1)

	)

152 
	#KR
 (
QR
>>1)

	)

154 
	#DI
 
QD


	)

155 
	#UI
 
QN


	)

156 
	#RI
 
QR


	)

158 
	#dbl
(
n
Ë(“)<<1)

	)

159 
	#hÆf
(
n
Ë((“)+1)>>1)

	)

162 
	#qm_n
 
s16


	)

163 
	#qm_deg
 
s16


	)

164 
	#qm_ød
 
s16


	)

165 
	#q1_6
 
s8


	)

166 
	#Q1_2
 
s8


	)

167 
	#Q0_5
 
s16


	)

168 
	#Q1_4
 
s16


	)

169 
	#Q5_0
 
s16


	)

171 #i‚de‡
abs


172 
	#abs
(
x
Ë((x)<0?-(x):(x))

	)

174 
	#i¢eg
(
x
Ë((x)<0)

	)

175 
	#mö
(
x
,
y
Ë((x)<(y)?(x):(y))

	)

176 
	#max
(
x
,
y
Ë((x)>(y)?(x):(y))

	)

179 
	#to_bö¨y_±
(
x
Ë(((x)*100+64)/128Ë

	)

180 
	#to_decimÆ_±
(
x
Ë(((x)*128+50)/100)

	)

184 
	#WOF100
 328

	)

186 
	#MOD16
 32768u

	)

191 #i‡
deföed
(
AVR
Ë|| deföed(
SDCC
Ë|| deföed(
XC16
Ë&& (
UI
==128)

192 
	#S16_E
 ((
qm_n
)(348))

	)

194 
	#S16_E
 ((
qm_n
)(272*
UI
/100))

	)

200 #i‡(
UI
==128)

201 
	#S16_LN10
 ((
qm_n
)((230*
UI
/100)+1))

	)

203 
	#S16_LN10
 ((
qm_n
)(230*
UI
/100))

	)

206 
	#S16_PI
 ((
qm_ød
)((
s32
)((s32)3142*
RI
/(s32)1000)))

	)

207 
	#S16_RAD
 (2*
S16_PI
Ë

	)

208 
	#S16_DEG
 (360*
DI
Ë

	)

214 
	#MIN_ATAN
 ((
qm_ød
)(-(
RI
+
MIN_ATAN_FRACT
)))

	)

218 
	#DEG_PER_RAD
 ((573*
DI
)/10)

	)

220 
	#RAD_PER_DEG
 ((0017*
RI
)/1000)

	)

227 
qm_n
 
s16_cos
(
qm_ød
 
phi
);

228 
qm_n
 
s16_sö
(
qm_ød
 
phi
);

231 
qm_n
 
cos
;

232 
qm_n
 
sö
;

233 }
s
;

234 
s32
 
söcos
;

235 } 
	tsöcos_t
;

236 
s32
 
s16_söcos
(
qm_ød
 
phi
);

237 
qm_n
 
s16_èn
(
qm_ød
 
phi
);

239 
s8
 
s16_quadø¡
(
qm_ød
 
phi
);

240 
	#s16_unwöd
(
phi
Ë(’hi)%(2*
S16_PI
)Ë

	)

241 
qm_n
 
s16_cŸ
(
qm_ød
 
phi
);

242 
qm_n
 
s16_csc
(
qm_ød
 
phi
);

243 
qm_n
 
s16_£c
(
qm_ød
 
phi
);

245 
qm_ød
 
s16_acos
(
qm_n
 
cos
);

246 
qm_ød
 
s16_asö
(
qm_n
 
sö
);

247 
qm_ød
 
s16_©™
(
qm_n
 
èn
);

248 
qm_n
 
s16_hypŸ
(qm_¿
x
,qm_¿
y
);

249 
qm_n
 
s16_ 
(qm_¿
n
);

251 
qm_n
 
s16_log
(qm_¿
a
,qm_¿
n
);

253 
qm_n
 
s16_log10
(qm_¿
n
);

255 
u16
 
s16_gcd
(u16 
u
, u16 
v
);

256 
qm_n
 
s16_dí
(qm_¿
pwr
);

257 
qm_n
 
s16_div
(qm_¿
a
, qm_¿
b
);

258 
qm_n
 
s16_mul
(qm_¿
a
, qm_¿
b
);

259 
qm_n
 
s16_pow
(qm_¿
a
,qm_¿
n
);

260 
s16
 
s16_ªdu˚
(
qm_n
 
k
);

262 
qm_n
 
s16_roŸ
(qm_¿
a
,qm_¿
n
);

263 
	#s16_sqr
(
a
Ë(
	`s16_mul
◊,a))

	)

264 
qm_n
 
s16_sqπ
(qm_¿
a
);

265 
qm_n
 
s16_Á˘
(qm_¿
n
);

266 
s16
 
s16_sˇÀ
(s16 
n
,s16 
s
);

283 
qm_deg
 
s16_todeg
(
qm_ød
 
ød
);

300 
qm_ød
 
s16_t‹ad
(
qm_deg
 
deg
);

303 
s16
 
s16_addov
(
qm_n
 
a
, qm_¿
b
, qm_¿
c
);

304 
	#s16_logov
(
a
Ë(◊)==
S16_NAN
Ë

	)

305 
s16
 
s16_subov
(
qm_n
 
a
, qm_¿
b
, qm_¿
c
);

306 
s16
 
s16_divov
(
qm_n
 
a
, qm_¿
b
, qm_¿
c
);

307 
s16
 
s16_mulov
(
qm_n
 
a
, qm_¿
b
, qm_¿
c
);

308 
s16
 
s16_powov
(
qm_n
 
a
, qm_¿
b
, qm_¿
c
);

309 
s16
 
s16_roŸov
(
qm_n
 
a
, qm_¿
b
, qm_¿
c
);

310 
	#s16_sqrov
(
a
Ë(
	`i¢eg
◊)Ë

	)

311 
	#s16_sqπov
(
a
,
b
Ë(
	`s16_roŸov
◊,b,2*
UI
))

	)

314 #i‡!
deföed
(
SDCC
Ë&& !deföed(
__C51__
Ë&& !deföed(
__CX51__
)

315 #¥agm®
∑ck
(
p›
)

318 #ifde‡
__˝lu•lus


	@mcc_generated_files/clock.c

45 
	~"˛ock.h
"

46 
	~"°döt.h
"

47 
	~"xc.h
"

49 
	$CLOCK_Inôülize
()

52 
CLKDIV
 = 0x3000;

54 
OSCTUN
 = 0x0000;

56 
REFOCONL
 = 0x0000;

58 
REFOCONH
 = 0x0000;

60 
REFOTRIML
 = 0x0000;

62 
	`__buûtö_wrôe_OSCCONH
((
uöt8_t
Ë((0x0700 >> 
_OSCCON_NOSC_POSITION
) & 0x00FF));

63 
	`__buûtö_wrôe_OSCCONL
((
uöt8_t
) (0x0700 & 0x00FF));

64 
	}
}

	@mcc_generated_files/clock.h

45 #i‚de‡
CLOCK_H


46 
	#CLOCK_H


	)

48 
	#_XTAL_FREQ
 8000000UL

	)

60 
CLOCK_Inôülize
();

	@mcc_generated_files/drivers/uart.c

27 
	~"u¨t.h
"

29 c⁄° 
u¨t_fun˘i⁄s_t
 
	gu¨t
[] = {

30 { 
UART1_is_rx_ªady
,

31 
UART1_Inôülize
,

32 
UART1_Ród
,

33 
UART1_is_tx_d⁄e
,

34 
UART1_is_tx_ªady
,

35 
UART1_Wrôe


	@mcc_generated_files/drivers/uart.h

23 #i‚de‡
_UART_H


24 
	#_UART_H


	)

29 
	~<°döt.h
>

30 
	~"../u¨t1.h
"

33 
	mUSBUART


34 } 
	tu¨t_c⁄figuøti⁄s_t
;

37 
boﬁ
 (*
D©aRódy
)();

38 (*
	mInôülize
)();

39 
uöt8_t
 (*
Ród
)();

40 
boﬁ
 (*
TønsmôD⁄e
)();

41 
boﬁ
 (*
TønsmôRódy
)();

42 (*
	mWrôe
)(
uöt8_t
 
	mtxd©a
);

43 } 
	tu¨t_fun˘i⁄s_t
;

45 c⁄° 
u¨t_fun˘i⁄s_t
 
u¨t
[];

	@mcc_generated_files/interrupt_manager.c

48 
	~<xc.h
>

53 
	$INTERRUPT_Inôülize
 ()

55 
IEC0
=0;

56 
IEC1
=0;

57 
IEC2
=0;

58 
IEC3
=0;

59 
IEC4
=0;

60 
IEC5
=0;

61 
IEC6
=0;

62 
IEC7
=0;

63 
	}
}

	@mcc_generated_files/interrupt_manager.h

45 #i‚de‡
_INTERRUPT_MANAGER_H


46 
	#_INTERRUPT_MANAGER_H


	)

75 
INTERRUPT_Inôülize
();

	@mcc_generated_files/mcc.c

48 #¥agm®
c⁄fig
 
DSWDTPS
 = 
DSWDTPS1F


49 #¥agm®
c⁄fig
 
DSWDTOSC
 = 
LPRC


50 #¥agm®
c⁄fig
 
DSBOREN
 = 
ON


51 #¥agm®
c⁄fig
 
DSWDTEN
 = 
ON


52 #¥agm®
c⁄fig
 
DSSWEN
 = 
ON


53 #¥agm®
c⁄fig
 
PLLDIV
 = 
DISABLED


54 #¥agm®
c⁄fig
 
I2C1SEL
 = 
DISABLE


55 #¥agm®
c⁄fig
 
IOL1WAY
 = 
ON


58 #¥agm®
c⁄fig
 
WPFP
 = 
WPFP127


59 #¥agm®
c⁄fig
 
SOSCSEL
 = 
OFF


60 #¥agm®
c⁄fig
 
WDTWIN
 = 
PS25_0


61 #¥agm®
c⁄fig
 
PLLSS
 = 
PLL_FRC


62 #¥agm®
c⁄fig
 
BOREN
 = 
ON


63 #¥agm®
c⁄fig
 
WPDIS
 = WPDIS

64 #¥agm®
c⁄fig
 
WPCFG
 = 
WPCFGDIS


65 #¥agm®
c⁄fig
 
WPEND
 = 
WPENDMEM


68 #¥agm®
c⁄fig
 
POSCMD
 = 
NONE


69 #¥agm®
c⁄fig
 
WDTCLK
 = 
LPRC


70 #¥agm®
c⁄fig
 
OSCIOFCN
 = 
OFF


71 #¥agm®
c⁄fig
 
FCKSM
 = 
CSDCMD


72 #¥agm®
c⁄fig
 
FNOSC
 = 
FRCDIV


73 #¥agm®
c⁄fig
 
ALTCMPI
 = 
CxINC_RB


74 #¥agm®
c⁄fig
 
WDTCMX
 = 
WDTCLK


75 #¥agm®
c⁄fig
 
IESO
 = 
ON


78 #¥agm®
c⁄fig
 
WDTPS
 = 
PS32768


79 #¥agm®
c⁄fig
 
FWPSA
 = 
PR128


80 #¥agm®
c⁄fig
 
WINDIS
 = 
OFF


81 #¥agm®
c⁄fig
 
FWDTEN
 = 
OFF


82 #¥agm®
c⁄fig
 
ICS
 = 
PGx1


83 #¥agm®
c⁄fig
 
LPCFG
 = 
OFF


84 #¥agm®
c⁄fig
 
GWRP
 = 
OFF


85 #¥agm®
c⁄fig
 
GCP
 = 
OFF


86 #¥agm®
c⁄fig
 
JTAGEN
 = 
OFF


88 
	~"mcc.h
"

	@mcc_generated_files/mcc.h

45 #i‚de‡
MCC_H


46 
	#MCC_H


	)

47 
	~<xc.h
>

48 
	~"sy°em.h
"

49 
	~"˛ock.h
"

50 
	~"pö_m™agî.h
"

51 
	~<°döt.h
>

52 
	~<°dboﬁ.h
>

53 
	~"u¨t1.h
"

54 
	~"öãºu±_m™agî.h
"

55 
	~"å≠s.h
"

56 
	~"tmr1.h
"

58 
	#_XTAL_FREQ
 8000000UL

	)

	@mcc_generated_files/pin_manager.c

51 
	~<xc.h
>

52 
	~"pö_m™agî.h
"

57 
	$PIN_MANAGER_Inôülize
()

62 
LATA
 = 0x0000;

63 
LATB
 = 0x0000;

64 
LATC
 = 0x0000;

69 
TRISA
 = 0x0797;

70 
TRISB
 = 0xFFFF;

71 
TRISC
 = 0x03FF;

76 
CNPD1
 = 0x0000;

77 
CNPD2
 = 0x0000;

78 
CNPD3
 = 0x0000;

79 
CNPU1
 = 0x0000;

80 
CNPU2
 = 0x0000;

81 
CNPU3
 = 0x0000;

86 
ODCA
 = 0x0000;

87 
ODCB
 = 0x0000;

88 
ODCC
 = 0x0000;

93 
ANSA
 = 0x0007;

94 
ANSB
 = 0xF20C;

95 
ANSC
 = 0x0007;

99 
	}
}

	@mcc_generated_files/pin_manager.h

47 #i‚de‡
_PIN_MANAGER_H


48 
	#_PIN_MANAGER_H


	)

52 
	~<xc.h
>

89 
PIN_MANAGER_Inôülize
();

	@mcc_generated_files/system.c

45 
	~"pö_m™agî.h
"

46 
	~"˛ock.h
"

47 
	~"sy°em.h
"

48 
	~"°döt.h
"

49 
	~"öãºu±_m™agî.h
"

50 
	~"å≠s.h
"

51 
	~"u¨t1.h
"

52 
	~"tmr1.h
"

54 
	$SYSTEM_Inôülize
()

56 
	`PIN_MANAGER_Inôülize
();

57 
	`CLOCK_Inôülize
();

58 
	`INTERRUPT_Inôülize
();

59 
	`UART1_Inôülize
();

60 
	`TMR1_Inôülize
();

61 
	}
}

	@mcc_generated_files/system.h

45 
	~"xc.h
"

46 
	~"°döt.h
"

48 #i‚de‡
SYSTEM_H


49 
	#SYSTEM_H


	)

62 
SYSTEM_Inôülize
();

	@mcc_generated_files/tmr1.c

50 
	~<xc.h
>

51 
	~"tmr1.h
"

70 
	s_TMR_OBJ_STRUCT


73 
boﬁ
 
	mtimîEœp£d
;

75 
uöt8_t
 
	mcou¡
;

77 } 
	tTMR_OBJ
;

79 
TMR_OBJ
 
	gtmr1_obj
;

85 
	$TMR1_Inôülize
 ()

88 
T1CON
 = 0x0000;

91 
PR1
 = 0xffff;

94 
TMR1
 = 0x00;

96 
tmr1_obj
.
timîEœp£d
 = 
Ál£
;

98 
	}
}

102 
	$TMR1_Tasks_16BôO≥øti⁄
( )

105 if(
IFS0bôs
.
T1IF
)

107 
tmr1_obj
.
cou¡
++;

108 
tmr1_obj
.
timîEœp£d
 = 
åue
;

109 
IFS0bôs
.
T1IF
 = 
Ál£
;

111 
	}
}

114 
	$TMR1_Pîiod16BôSë
–
uöt16_t
 
vÆue
 )

117 
PR1
 = 
vÆue
;

119 
tmr1_obj
.
timîEœp£d
 = 
Ál£
;

120 
	}
}

122 
uöt16_t
 
	$TMR1_Pîiod16BôGë
( )

124 –
PR1
 );

125 
	}
}

127 
	$TMR1_Cou¡î16BôSë
 ( 
uöt16_t
 
vÆue
 )

130 
TMR1
 = 
vÆue
;

132 
tmr1_obj
.
timîEœp£d
 = 
Ál£
;

133 
	}
}

135 
uöt16_t
 
	$TMR1_Cou¡î16BôGë
( )

137 –
TMR1
 );

138 
	}
}

142 
	$TMR1_Sèπ
( )

145 
tmr1_obj
.
timîEœp£d
 = 
Ál£
;

149 
T1CONbôs
.
TON
 = 1;

150 
	}
}

152 
	$TMR1_St›
( )

155 
T1CONbôs
.
TON
 = 
Ál£
;

157 
	}
}

159 
boﬁ
 
	$TMR1_GëEœp£dThíCÀ¨
()

161 
boﬁ
 
°©us
;

163 
°©us
 = 
tmr1_obj
.
timîEœp£d
;

165 if(
°©us
 =
åue
)

167 
tmr1_obj
.
timîEœp£d
 = 
Ál£
;

169  
°©us
;

170 
	}
}

172 
	$TMR1_So·w¨eCou¡îGë
()

174  
tmr1_obj
.
cou¡
;

175 
	}
}

177 
	$TMR1_So·w¨eCou¡îCÀ¨
()

179 
tmr1_obj
.
cou¡
 = 0;

180 
	}
}

181 
	$timî0_°¨t
()

183 
	`TMR1_St›
();

184 
	`TMR1_Cou¡î16BôSë
(0);

185 
	`TMR1_Sèπ
();

186 
	}
}

187 
	$timî0_°›
()

189 
	`TMR1_St›
();

190 
	}
}

191 
uöt16_t
 
	$timî0_ªad
()

194 
uöt16_t
 
cou¡
;

196 
uöt8_t
 
th0
;

197 
uöt8_t
 
é0
;

198 } 
s
;

199 } 
u
;

200 
u
.
cou¡
=
	`TMR1_Cou¡î16BôGë
();

203 i‡(
u
.
cou¡
 && 1) u.count++;

204  
u
.
cou¡
>>1;

205 
	}
}

	@mcc_generated_files/tmr1.h

45 #i‚de‡
_TMR1_H


46 
	#_TMR1_H


	)

52 
	~<xc.h
>

53 
	~<°döt.h
>

54 
	~<°dboﬁ.h
>

56 #ifde‡
__˝lu•lus


109 
TMR1_Inôülize
 ();

129 
TMR1_Tasks_16BôO≥øti⁄
( );

148 
TMR1_Pîiod16BôSë
–
uöt16_t
 
vÆue
 );

168 
uöt16_t
 
TMR1_Pîiod16BôGë
( );

200 
TMR1_Cou¡î16BôSë
 ( 
uöt16_t
 
vÆue
 );

219 
uöt16_t
 
TMR1_Cou¡î16BôGë
( );

239 
TMR1_Sèπ
( );

258 
TMR1_St›
( );

279 
boﬁ
 
TMR1_GëEœp£dThíCÀ¨
();

298 
TMR1_So·w¨eCou¡îGë
();

317 
TMR1_So·w¨eCou¡îCÀ¨
();

319 #ifde‡
__˝lu•lus


	@mcc_generated_files/traps.c

48 
	~<xc.h
>

49 
	~"å≠s.h
"

51 
	#ERROR_HANDLER
 
	`__©åibuã__
((
öãºu±
,
no_auto_psv
))

	)

52 
	#ERROR_HANDLER_NORETURN
 
ERROR_HANDLER
 
	`__©åibuã__
((
n‹ëu∫
))

	)

53 
	#FAILSAFE_STACK_GUARDSIZE
 8

	)

58 
uöt16_t
 
	gTRAPS_îr‹_code
 = -1;

65 
__©åibuã__
((
«ked
, 
n‹ëu∫
, 
wók
)Ë
	$TRAPS_hÆt_⁄_îr‹
(
uöt16_t
 
code
)

67 
TRAPS_îr‹_code
 = 
code
;

68 #ifde‡
__DEBUG


69 
	`__buûtö_so·w¨e_bªakpoöt
();

74 
	}
}

80 
ölöe
 
	$u£_Áûß„_°ack
()

82 
uöt8_t
 
Áûß„_°ack
[32];

83 
asm
 volatile (

86 : [
p°ack
]"r"(
Áûß„_°ack
)

91 
SPLIM
 = (
uöt16_t
)(((
uöt8_t
 *)
Áûß„_°ack
) + (failsafe_stack)

92 - 
FAILSAFE_STACK_GUARDSIZE
);

93 
	}
}

96 
ERROR_HANDLER_NORETURN
 
	$_Oscûœt‹Faû
()

98 
INTCON1bôs
.
OSCFAIL
 = 0;

99 
	`TRAPS_hÆt_⁄_îr‹
(
TRAPS_OSC_FAIL
);

100 
	}
}

102 
ERROR_HANDLER_NORETURN
 
	$_SèckEº‹
()

108 
	`u£_Áûß„_°ack
();

109 
INTCON1bôs
.
STKERR
 = 0;

110 
	`TRAPS_hÆt_⁄_îr‹
(
TRAPS_STACK_ERR
);

111 
	}
}

113 
ERROR_HANDLER_NORETURN
 
	$_AddªssEº‹
()

115 
INTCON1bôs
.
ADDRERR
 = 0;

116 
	`TRAPS_hÆt_⁄_îr‹
(
TRAPS_ADDRESS_ERR
);

117 
	}
}

119 
ERROR_HANDLER_NORETURN
 
	$_M©hEº‹
()

121 
INTCON1bôs
.
MATHERR
 = 0;

122 
	`TRAPS_hÆt_⁄_îr‹
(
TRAPS_MATH_ERR
);

123 
	}
}

	@mcc_generated_files/traps.h

45 #i‚de‡
_TRAPS_H


46 
	#_TRAPS_H


	)

48 
	~<°döt.h
>

56 
	mTRAPS_OSC_FAIL
 = 0,

57 
	mTRAPS_STACK_ERR
 = 1,

58 
	mTRAPS_ADDRESS_ERR
 = 2,

59 
	mTRAPS_MATH_ERR
 = 3,

60 } 
	tTRAPS_ERROR_CODE
;

84 
__©åibuã__
((
«ked
, 
n‹ëu∫
, 
wók
)Ë
TRAPS_hÆt_⁄_îr‹
(
uöt16_t
 
code
);

	@mcc_generated_files/uart1.c

48 
	~"u¨t1.h
"

54 
	$UART1_Inôülize
()

61 
U1MODE
 = (0x8008 & ~(1<<15));

63 
U1STA
 = 0x0000;

65 
U1BRG
 = 0x0067;

67 
U1ADMD
 = 0x0000;

69 
U1SCCON
 = 0x0000;

71 
U1SCINT
 = 0x0000;

73 
U1GTC
 = 0x0000;

75 
U1WTCL
 = 0x0000;

77 
U1WTCH
 = 0x0000;

79 
RPINR18bôs
.
U1RXR
=
U1RX
;

80 
RPOR3bôs
.
RP6R
=
U1TX
;

81 
U1MODEbôs
.
UARTEN
 = 1;

82 
U1STAbôs
.
UTXEN
 = 1;

83 
U1STAbôs
.
URXEN
 = 1;

85 
	}
}

88 
boﬁ
 
	$UART1_is_tx_ªady
()

90  (
IFS0bôs
.
U1TXIF
 && 
U1STAbôs
.
UTXEN
);

91 
	}
}

93 
boﬁ
 
	$UART1_is_rx_ªady
()

95  
IFS0bôs
.
U1RXIF
;

96 
	}
}

98 
boﬁ
 
	$UART1_is_tx_d⁄e
()

100  
U1STAbôs
.
TRMT
;

101 
	}
}

103 
uöt8_t
 
	$UART1_Ród
()

105 !(
U1STAbôs
.
URXDA
 == 1))

110 i‡((
U1STAbôs
.
OERR
 == 1))

112 
U1STAbôs
.
OERR
 = 0;

117  
U1RXREG
;

118 
	}
}

120 
	$UART1_Wrôe
(
uöt8_t
 
txD©a
)

122 
U1STAbôs
.
UTXBF
 == 1)

127 
U1TXREG
 = 
txD©a
;

128 
	}
}

130 
UART1_STATUS
 
	$UART1_SètusGë
 ()

132  
U1STA
;

133 
	}
}

	@mcc_generated_files/uart1.h

45 #i‚de‡
_UART1_H


46 
	#_UART1_H


	)

52 
	~<xc.h
>

53 
	~<°dboﬁ.h
>

54 
	~<°döt.h
>

56 #ifde‡
__˝lu•lus


80 
UART1_RX_DATA_AVAILABLE


84 
UART1_RX_OVERRUN_ERROR


88 
UART1_FRAMING_ERROR


92 
UART1_PARITY_ERROR


96 
UART1_RECEIVER_IDLE


100 
UART1_TX_COMPLETE


104 
UART1_TX_FULL


107 }
	tUART1_STATUS
;

112 
	#U1TX
 3

113 
	#U1RX
 5

114 

	)

115 #ifde‡
gëch¨


116 #unde‡
gëch¨


118 
	#gëch¨
(Ë
	`UART1_Ród
()

	)

119 #ifde‡
putch¨


120 #unde‡
putch¨


122 
	#putch¨
(
c
Ë
	`UART1_Wrôe
(c)

	)

124 
	#UART1_D©aRódy
 (
U1STAbôs
.
URXDA
 =1)

	)

150 
UART1_Inôülize
();

159 
boﬁ
 
UART1_is_tx_ªady
();

168 
boﬁ
 
UART1_is_rx_ªady
();

177 
boﬁ
 
UART1_is_tx_d⁄e
();

198 
uöt8_t
 
UART1_Ród
();

218 
UART1_Wrôe
(
uöt8_t
 
txD©a
);

252 
UART1_STATUS
 
UART1_SètusGë
 ();

254 #ifde‡
__˝lu•lus


	@testmul.c

5 
	~<°dio.h
>

6 
	~<°dlib.h
>

7 
	~"mcc.h
"

8 
	~"s16m©h.h
"

10 
timî0_°¨t
();

11 
timî0_°›
();

12 
u16
 
timî0_ªad
();

14 
	#EOT
 0x04

	)

15 
	#BS
 0x08

	)

16 
	#DEL
 0x7f

	)

18 c⁄° 
	g¨gs
[]="args> ";

21 c⁄° 
	gf‹m©
[]="%s*%s=%s,t=%u us\n";

23 c⁄° 
	gtoﬁ⁄g
[]="ÅooÜong\n";

24 c⁄° 
	govîÊow
[]="overflow\n";

26 
	göput
[16];

27 
	gabuf
[12];

28 
	gbbuf
[12];

29 
	gpbuf
[12];

31 
s8
 
	$ªadlöe
()

33 
s8
 
i
,
c
;

34 
i
=0;

37 
˛o›
: 
c
=
	`gëch¨
();

38 i‡(
c
==
DEL
) {

39 i‡(
i
>0) {

40 
	`putch¨
(
BS
);

41 
	`putch¨
(' ');

42 
	`putch¨
(
BS
);

43 
i
-=1;

45 
˛o›
;

47 
	`putch¨
(
c
);

48 i‡(
c
=='\n') {

51 
öput
[
i
++]=
c
;

52 } 
i
<(
öput
Ë&& 
c
!=
EOT
);

53 i‡(
c
==
EOT
)

54 
	`putch¨
('\n');

55  
i
;

57 
	}
}

59 *
	$skùws
(*
p
, *
q
)

61 *
p
 <'!' &&Ö < 
q
) {

62 i‡(*
p
 =
EOT
 || *p == '\r')

64 
p
+=1;

66  
p
;

68 
	}
}

70 *
	$skùn⁄ws
(*
p
, *
q
)

72 *
p
 >' ' &&Ö < 
q
)

73 
p
+=1;

74  
p
;

76 
	}
}

81 
	$f‹m©qmn
(*
d
, vﬁ©ûê
s16
 
x
)

83 
s16
 
qm
,
qn
;

85 i‡(
	`i¢eg
(
x
)) {

86 
x
=-x;

88 i‡(!
	`i¢eg
(
x
)Ë*
d
++='-';

90 
qm
=
x
/
QN
;

91 
qn
=
	`abs
(
x
%
QN
);

93 
d
+=
	`•rötf
(d,"%.1d",
qm
);

94 *
d
++='.';

95 
	`•rötf
(
d
,"%.*d",()(
NWIDTH
),
qn
);

97 
	}
}

99 
	$maö
()

102 *
ù
, *
q
;

103 
u16
 
time
;

104 
s8
 
Àn
;

105 
qm_n
 
p
,
a
,
b
;

107 
	`SYSTEM_Inôülize
();

110 
	`¥ötf
(
¨gs
);

111 
Àn
=
	`ªadlöe
();

112 i‡(!(
Àn
 < (
s8
)((
öput
)))) {

113 
	`¥ötf
(
toﬁ⁄g
);

116 
q
=
öput
+
Àn
;

117 
ù
=
	`skùws
(
öput
,
q
);

118 i‡(*
ù
==
EOT
)

120 i‡(*
ù
=='\r')

122 
a
=
	`©oi
(
ù
);

123 
	`f‹m©qmn
(
abuf
,
a
);

124 
ù
=
	`skùn⁄ws
(ù,
q
);

125 
ù
=
	`skùws
(ù,
q
);

126 i‡(*
ù
=='\r')

128 
b
=
	`©oi
(
ù
);

129 
	`f‹m©qmn
(
bbuf
,
b
);

131 
	`timî0_°¨t
();

136 
p
=
	`s16_mul
(
a
,
b
);

138 
	`timî0_°›
();

139 
time
 = 
	`timî0_ªad
();

140 
	`f‹m©qmn
(
pbuf
,
p
);

142 
	`¥ötf
(
f‹m©
,
abuf
,
bbuf
,
pbuf
,
time
);

145 i‡(
	`s16_mulov
(
p
,
a
,
b
))

147 
	`¥ötf
(
ovîÊow
);

152 
	}
}

	@testmul.hex

	@
1
.
0
21
592
../../lib/s16math.h
mcc_generated_files/clock.c
mcc_generated_files/clock.h
mcc_generated_files/drivers/uart.c
mcc_generated_files/drivers/uart.h
mcc_generated_files/interrupt_manager.c
mcc_generated_files/interrupt_manager.h
mcc_generated_files/mcc.c
mcc_generated_files/mcc.h
mcc_generated_files/pin_manager.c
mcc_generated_files/pin_manager.h
mcc_generated_files/system.c
mcc_generated_files/system.h
mcc_generated_files/tmr1.c
mcc_generated_files/tmr1.h
mcc_generated_files/traps.c
mcc_generated_files/traps.h
mcc_generated_files/uart1.c
mcc_generated_files/uart1.h
testmul.c
testmul.hex
